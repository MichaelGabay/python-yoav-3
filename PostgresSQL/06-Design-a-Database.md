# עיצוב מסד נתונים

## עקרונות עיצוב טוב

### 1. נרמליזציה (Normalization)
פירוק נתונים לטבלאות כדי למנוע כפילות ולהבטיח עקביות.

### 2. מפתח ראשי (Primary Key)
כל טבלה חייבת מזהה ייחודי – עמודה או צירוף עמודות שמזהים שורה אחת.

### 3. מפתחות זרים (Foreign Keys)
קישור בין טבלאות – עמודה שמפנה למפתח ראשי בטבלה אחרת.

### 4. הימנעות מכפילויות
אם "מדינה" חוזרת פעמים רבות – עדיף טבלת `countries` והפניה אליה.

## שלבי עיצוב

1. **זיהוי ישויות** – מה צריך לאחסן? (לקוחות, מוצרים, הזמנות)
2. **הגדרת מאפיינים** – אילו שדות לכל ישות?
3. **זיהוי קשרים** – איך ישויות קשורות (אחד לרבים, רבים לרבים)
4. **נרמליזציה** – פירוק וסידור לפי כללים

## דוגמה – חנות

- `customers` – לקוחות (id, name, email)
- `products` – מוצרים (id, name, price)
- `orders` – הזמנות (id, customer_id, order_date)
- `order_items` – פריטים בהזמנה (order_id, product_id, quantity)

## תרגילים

### תרגיל 1
מערכת לניהול ספריית סרטים. רשום 3 ישויות מרכזיות ואילו מאפיינים יהיו לכל אחת.

### תרגיל 2
מה הבעיה בטבלה אחת שמכילה: `order_id`, `customer_name`, `product_name`, `quantity`? איך משפרים?

### תרגיל 3
צייר במילים את הקשר בין טבלאות `students`, `courses`, ו-`enrollments` (הרשמה לקורסים).

### תרגיל 4
הסבר מהו מפתח זר ובמה הוא שונה ממפתח ראשי.

### תרגיל 5
עצב מסד נתונים לפנסיון לחיות: כל בעל חיים שייך לבעלים אחד, ויכול לקבל טיפולים מרובים. רשום את הטבלאות והקשרים ביניהן.

---

## פתרונות

<details>
<summary>לחץ כדי לראות פתרונות</summary>

### תרגיל 1
דוגמה: (1) `movies` – id, title, director, year, duration. (2) `members` – id, name, email, join_date. (3) `rentals` – id, movie_id, member_id, rent_date, return_date.

### תרגיל 2
כפילות: אותו לקוח ומוצר חוזרים בהזמנות שונות. עדכון שם לקוח ידרוש שינוי בהרבה שורות. עדיף: `customers`, `products`, `orders`, `order_items` עם מפתחות זרים.

### תרגיל 3
`students` (1) ←→ (N) `enrollments` (N) ←→ (1) `courses`. כלומר: סטודנט נרשם לקורסים רבים, קורס נרשמים אליו סטודנטים רבים. טבלת `enrollments` מקשרת ביניהם.

### תרגיל 4
מפתח ראשי – מזהה ייחודי בתוך הטבלה. מפתח זר – עמודה שמפנה למפתח ראשי בטבלה אחרת, ויוצרת קשר לוגי ביניהן.

### תרגיל 5
- `owners` – id, name, phone  
- `animals` – id, name, species, owner_id (FK → owners)  
- `treatments` – id, animal_id (FK → animals), date, description, vet_name  

</details>
